%% ---- font settings ---- %%
\usepackage{fontspec}
\usepackage[english]{babel}
\babelprovide[main,import,onchar=fonts id]{thai}
\babelprovide[import,onchar=fonts id]{english}
\defaultfontfeatures{Ligatures=TeX} % Map LaTeX formatting, e.g., ``'' → proper quotes
\babelfont[thai]{rm}[%
	ItalicFont={Laksaman-Italic.otf},%
	BoldFont={Laksaman-Bold.otf},%
	BoldItalicFont={Laksaman-BoldItalic.otf},%
	Script=Thai,%
	Scale=MatchLowercase,%
	Ligatures=TeX,
]{Laksaman.otf} %
\babelfont[thai]{sf}[%
	Script=Thai,%
	Scale=MatchUppercase,%
	Ligatures=TeX,
]{IBM Plex Sans Thai} % 
\babelfont[thai]{tt}[%
	Script=Thai,%
	Scale=MatchLowercase,%
	Ligatures=TeX,
]{TlwgTypist.otf} % ตั้งฟอนต์หลักภาษาไทย
\newfontfamily{\thaifont}[%
	ItalicFont={Laksaman-Italic.otf},%
	BoldFont={Laksaman-Bold.otf},%
	BoldItalicFont={Laksaman-BoldItalic.otf},%
	Script=Thai,%
	Scale=MatchLowercase,%
	WordSpace=1.25,%
	Ligatures=TeX,
]{Laksaman.otf} % ตั้งฟอนต์หลักภาษาไทย
% \newfontfamily\thaifontsf{IBM Plex Sans Thai}
% \newfontfamily\thaifonttt{TlwgTypist.otf}
% \newcommand{\thaisf}[1]{{\uccoff\thaifontsf #1\uccon}}
% \newcommand{\thaitt}[1]{{\uccoff\thaifonttt #1\uccon}}
% \newenvironment{thailang}{\thaifontsf}{} % create environment for Thai language
% \usepackage[Latin,Thai]{ucharclasses} % ตั้งค่าให้ใช้ "thailang" environment เฉพาะ string ที่เป็น Unicode ภาษาไทย
% \setTransitionTo{Thai}{\begin{thailang}}
% 		\setTransitionFrom{Thai}{\end{thailang}}

%% ---- allow CJK usage ---- %%
\usepackage{luatexja} % For handling CJK languages
\usepackage[match]{luatexja-fontspec}
% \setmainjfont{TakaoMincho}
% \setsansjfont{TakaoGothic}
% \setmonojfont{Komatuna}
% \newfontfamily\cjkfont[ ItalicFont=AR PL UKai TW ]{Source Han Serif JP}
\setmainjfont[ ItalicFont=AR PL UKai TW ]{Source Han Serif JP}
% {Noto Serif CJK SC} % CJK font (Chinese, Japanese, Korean)
% \newfontfamily\cjkfontsf{Noto Sans CJK SC}
% \newfontfamily\cjkfontsf{Source Han Sans JP}
\setsansjfont{Source Han Sans JP}
% \newfontfamily\cjkfonttt{Noto Sans Mono CJK SC}
% \newfontfamily\cjkfonttt{Source Han Mono}
\setmonojfont{Source Han Mono}
% \usepackage{xeCJK} % this should be called before Polyglossia
% \setCJKmainfont[ ItalicFont=AR PL UKai TW ]{Source Han Serif JP}
% \setCJKsansfont{Source Han Sans JP}
% \setCJKmonofont{Source Han Mono}

%% ---- spacing between lines ---- %%
\usepackage{setspace}
% \singlespacing % default setting
% \onehalfspacing % recommend using this for Thai language

%% ---- using alphabatic language ---- %%
% \usepackage{polyglossia}
% \setdefaultlanguage{english} % it is preferrable to set English as the main language, since the numeric system is compatible with most LaTeX features such as 'enumerate' and so on
% \setotherlanguages{thai}

\AtBeginDocument\captionsthai % allow captions to be in Thai
%% ---- math packages ---- %%
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{bm} % same functionality as \mathbf{} but for greek letters
% \usepackage{derivative} % macros for typesetting derivatives
\numberwithin{equation}{section} % equation numbers are formatted as <#Section>.<#eq in the section>
\usepackage{cancel}
\renewcommand\CancelColor{\color{red}}

%% ---- define math environment ---- %%
\usepackage{amsthm}
\usepackage{mathrsfs}

%% ---- hyperref settings ---- %%
% \usepackage{hyperref} % Beamer already has hyperref by default
\usepackage{url}
% \usepackage{cite}
\usepackage{natbib}
\usepackage{bibentry}
\usepackage{xcolor}
\hypersetup{
	colorlinks,
	linkcolor={red!50!black},
	citecolor={blue!50!black},
	urlcolor={blue!80!black}
}

%% ---- misc. ---- %%
% \usepackage{mhchem} % use chemistry notation
\newcommand\scalemath[2]{\scalebox{#1}{\mbox{\ensuremath{\displaystyle #2}}}} % scale display math environment
\usepackage{lipsum}
\usepackage{metalogo} % for extended LaTeX logo such as XeTeX
\usepackage{subcaption} % allowing subfigure environment
% \usepackage[section]{placeins} % ensure floats do not go into the next section and allow the use of \FloatBarrier
\usepackage{graphicx} % allow cropping and rotating images
\usepackage{multimedia}
\usepackage{tikzit}
\input{nodes.tikzstyles}

%% ---- Theme choice ---- %%
\usetheme{metropolis}
% \usetheme{Berkeley}
% \usecolortheme{beaver}
% \usecolortheme{dove}
% \usecolortheme{spruce}
% \logo{\large \XeTeX{}}

%% ---- show TOC after sections ---- %%
% \AtBeginSection[]
% {
%     \begin{frame}
%         \frametitle{Outline}
%         \tableofcontents[currentsection]
%     \end{frame}
%     }

%% ---- Show notes ---- %%
\usepackage{pgfpages}
% \setbeameroption{show notes}
% \setbeameroption{show notes on second screen=right}
% for working around text color bug when using XeLaTeX
\makeatletter
\def\beamer@framenotesbegin{% at beginning of slide
	\usebeamercolor[fg]{normal text}
	\gdef\beamer@noteitems{}% 
	\gdef\beamer@notes{}% 
}
\makeatother

%% ---- page numbers ---- %%
% \setbeamertemplate{page number in head/foot}[totalframenumber]\setbeamertemplate{navigation symbols}{\footnotesize\usebeamertemplate{page number in head/foot}}
\setbeamertemplate{caption}[numbered]
